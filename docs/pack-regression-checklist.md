# 打包回归测试清单（Windows）

版本范围：`portable exe` 构建产物  
适用产物：`release/AI Bot-<version>-windows-x64-portable.exe`

## 0. 测试前准备
- [ ] 清理旧版本进程（任务管理器确认无 `AI Bot.exe`）
- [ ] 准备一个可读写目录作为测试目录（例如 `D:\test\aibot`）
- [ ] 准备一个可测试的 `.model3.json` Live2D 模型路径

---

## 1. 安装/分发验证（Portable）
目标：确认无需开发环境即可运行。

### 步骤
1. 在一台未安装 Node.js 的 Windows 机器上复制 `portable exe`。
2. 双击 `exe` 启动程序。

### 预期结果
- [ ] 程序可直接启动，无“缺少运行时”报错
- [ ] 启动后出现托盘图标
- [ ] 主设置窗口可正常打开

---

## 2. 启动验证
目标：确认主流程窗口可正常拉起与交互。

### 步骤
1. 托盘菜单点击“打开设置”。
2. 使用快捷键显示/隐藏聊天窗口。
3. 使用快捷键显示/隐藏 Live2D 窗口。

### 预期结果
- [ ] 设置窗口可打开且可关闭为隐藏
- [ ] 聊天窗口可正常显示/隐藏
- [ ] Live2D 窗口可正常显示/隐藏

---

## 3. 退出验证
目标：确认“退出程序”不会残留后台进程。

### 步骤
1. 托盘菜单点击“退出程序”。
2. 打开任务管理器检查进程。

### 预期结果
- [ ] 程序主窗口和子窗口全部关闭
- [ ] 无残留 `AI Bot.exe` 进程

---

## 4. 配置读写验证
目标：确认配置持久化有效。

### 步骤
1. 在设置页修改以下配置并保存：
   - API 配置（新增一条）
   - 快捷键
   - Live2D 模型路径
   - Live2D 动作映射表（expression / motion）
2. 退出程序并重新启动。
3. 再次打开设置页检查配置。

### 预期结果
- [ ] 配置重启后仍存在
- [ ] 映射表内容重启后保持一致
- [ ] Live2D 路径保存后可触发模型重载

---

## 5. 工具调用验证
目标：确认内置工具可被正确调用。

### 步骤
1. 在聊天窗口发起文件读取/写入任务（`file_read`、`file_write`）。
2. 发起目录列举任务（`file_list`）。
3. 发起浏览器打开任务（`open_in_browser`）。
4. 发起 Live2D 控制任务（`live2d_control`），分别测试：
   - `action_type = expression`
   - `action_type = motion`
   - 使用别名 `action_name`（验证映射生效）

### 预期结果
- [ ] 各工具调用有返回结果，不报未注册错误
- [ ] 文件工具在目标目录读写正确
- [ ] 浏览器工具可打开目标地址/文件
- [ ] Live2D 动作触发成功，别名映射生效

---

## 6. 回归记录模板
建议每次发版复制一份本节内容到发布记录中。

### 测试信息
- 测试版本：
- 测试日期：
- 测试环境（Windows 版本）：
- 测试人：

### 结果汇总
- 安装/分发：通过 / 不通过
- 启动：通过 / 不通过
- 退出：通过 / 不通过
- 配置读写：通过 / 不通过
- 工具调用：通过 / 不通过

### 问题记录
1. 问题描述：
   - 复现步骤：
   - 影响范围：
   - 严重级别：
   - 处理状态：
